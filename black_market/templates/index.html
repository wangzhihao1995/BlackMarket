<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Black Market | Easy To Exchange Your Courses</title>
        <!-- Bootstrap Core CSS -->
        <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom Fonts -->
        <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
        <!-- Plugin CSS -->
        <link href="../static/vendor/magnific-popup/magnific-popup.css" rel="stylesheet">
        <!-- Theme CSS -->
        <link href="../static/css/creative.min.css" rel="stylesheet">
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body id="page-top">
        <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                    </button>
                    <a class="navbar-brand page-scroll" href="#page-top">Black Market</a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a class="page-scroll" href="#about">About</a>
                        </li>
                        <li>
                            <a class="page-scroll" href="#contact">Contact</a>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
        <header>
            <div class="header-content">
                <div class="header-content-inner">
                    <!--                     <h1 id="homeHeading">Black Market</h1>
                    <hr> -->
                    <div class="container-fluid">
                        <div class="row-fluid">
                            <div class="span4">
                                <form method="get" id="newpostform" class="form-inline">
                                    <img src="static/img/supply.png" width="17px">
                                    <input id="supplyCourse" name="supply" class="input-medium search-query" placeholder="搜供给" value="" type="text" style="color:#6699ee; width:100px;height:30px">
                                    <img src="static/img/demand.png" width="17px">
                                    <input id="demandCourse" name="demand" class="input-medium search-query" placeholder="搜需求" value="" type="text" style="color:#6699ee; width:100px;height:30px">
                                    <button class="btn btn-default"><a class="fa fa-search"></a></button>
                                </form><br>
                            </div>
                            <div class="container-fluid">
                                <div class="row">
                                    {% for post in posts %}
                                        <div class="col-md-6" onclick="openPostPgae('{{post.id}}');">
                                            <div class="panel panel-default" style="background-color: rgba(0,0,0,.5);">
                                                <div class="panel-body">
                                                    <div class="row-fluid">
                                                        <div class="row">
                                                            <a style="color:#CCCCCC;"><em>{{post.time}}</em></a>
                                                            <p style="font-size:15px;"><a style="color:#FFFFFF;">{{post.message}}</a></p>
                                                        </div>
                                                        <div class="row">
                                                            <img src="static/img/supply.png" width="18px">
                                                            <a style="font-size:10px;" class="btn btn-default">{{post.supply.course_name}}</a>
                                                            <img src="static/img/demand.png" width="18px">
                                                            <a style="font-size:10px;" class="btn btn-default">{{post.demand.course_name}}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        
                        <nav aria-label="Page navigation">
                            <ul class="pager"><br>
                                {% if page != 1 %}
                                    <li><a class="btn btn-default" id="pre" onclick="post('/', {page: 1, demand: getDemand(), supply: getSupply()});">First</a></li>
                                    <li><a class="btn btn-default" id="pre" onclick="post('/', {page: previousPage(), demand: getDemand(), supply: getSupply()});">Previous</a></li>
                                {% endif %}
                                {% if has_next %}
                                    <li><a class="btn btn-default" id="next" onclick="post('/', {page: nextPage(), demand: getDemand(), supply: getSupply()});">Next</a></li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </header>
                
                <section class="bg-primary" id="newpost">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 col-lg-offset-2 text-center">
                                <h1 class="section-heading">NEW POST</h1>
                                <hr class="light">
                                <p class="text-faded">立即发布你的 <strong>「供给」</strong> 和 <strong>「需求」</strong> 并在第一时间得到联系。</p>
                                <a class="page-scroll btn btn-default btn-xl sr-button" href="/newpost">MAKE A POST</a>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="about">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 text-center">
                                <h2 class="section-heading">We've got what you need!</h2>
                                <hr class="primary">
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row">
                            <!--                 <div class="col-lg-3 col-md-6 text-center">
                                <div class="service-box">
                                    <i class="fa fa-4x fa-diamond text-primary sr-icons" data-sr-id="2" style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                                    <h3>Sturdy Templates</h3>
                                    <p class="text-muted">Our templates are updated regularly so they don't break.</p>
                                </div>
                            </div> -->
                            <div class="col-lg-4 col-md-6 text-center">
                                <div class="service-box">
                                    <i class="fa fa-4x fa-search text-primary sr-icons" data-sr-id="4" style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                                    <h3>Search</h3>
                                    <p class="text-muted">Search for target courses by multiple filter conditions.</p>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 text-center">
                                <div class="service-box">
                                    <i class="fa fa-4x fa-paper-plane text-primary sr-icons" data-sr-id="3" style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                                    <h3>Post</h3>
                                    <p class="text-muted">Make a post to tell everybody your demand and supply with messages.</p>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 text-center">
                                <div class="service-box">
                                    <i class="fa fa-4x fa-exchange text-primary sr-icons" data-sr-id="5" style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                                    <h3>Exchange</h3>
                                    <p class="text-muted">Contact him or her to exchange courses through <a href="http://ss.nsd.edu.cn:8080/ccer/CourseCCER/CourseCCER.html">official course management system</a>.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <aside class="bg-dark" id="get_started">
                    <div class="container text-center">
                        <div class="call-to-action">
                            <h2>（这里应该写啥呢？）</h2>
                            <a href="#page-top" class="btn btn-default btn-xl sr-button">（这里应该写啥呢？）</a>
                        </div>
                    </div>
                </aside>
                <section id="contact">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 col-lg-offset-2 text-center">
                                <h2 class="section-heading">We need your feedback!</h2>
                                <hr class="primary">
                                <p>Black Market is not nearly perfect. Your feedback is needed to improve our product.</p>
                            </div>
                            <div class="col-lg-4 col-lg-offset-2 text-center">
                                <i class="fa fa-qrcode fa-3x sr-contact"></i>
                                <!-- TODO -->
                                <p><a href="">nsdblackmarket</a></p>
                            </div>
                            <div class="col-lg-4 text-center">
                                <i class="fa fa-envelope-o fa-3x sr-contact"></i><br>
                                <p><a href="mailto:nsdblackmarket@163.com">nsdblackmarket@163.com</a></p>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- JS Code -->
                <script type="text/javascript">
                function openPostPgae(postId){
                var url = "http://" + window.location.host + "/posts/" + postId
                window.location.href = url
                }
                function post(path, params, method) {
                method = method || "post";
                var form = document.createElement("form");
                form.setAttribute("method", method);
                form.setAttribute("action", path);
                for(var key in params) {
                if(params.hasOwnProperty(key)) {
                var hiddenField = document.createElement("input");
                hiddenField.setAttribute("type", "hidden");
                hiddenField.setAttribute("name", key);
                hiddenField.setAttribute("value", params[key]);
                form.appendChild(hiddenField);
                }
                }
                document.body.appendChild(form);
                form.submit();
                }
                window.onload=function(){setSupply();setDemand();}
                function setSupply(){
                document.getElementById("supplyCourse").value = "{{target_supply}}";;
                }
                function setDemand(){
                document.getElementById("demandCourse").value = "{{target_demand}}";
                }
                function getSupply(){
                return document.getElementById("supplyCourse").value;
                }
                function getDemand(){
                return document.getElementById("demandCourse").value;
                }
                function previousPage(){
                var previousPageIndex = {{page}} - 1;
                return previousPageIndex;
                }
                function nextPage(){
                var nextPageIndex = {{page}} + 1;
                return nextPageIndex;
                }
                </script>
                <!-- jQuery -->
                <script src="../static/vendor/jquery/jquery.min.js"></script>
                <!-- Bootstrap Core JavaScript -->
                <script src="../static/vendor/bootstrap/js/bootstrap.min.js"></script>
                <!-- Plugin JavaScript -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
                <script src="../static/vendor/scrollreveal/scrollreveal.min.js"></script>
                <script src="../static/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
                <!-- Theme JavaScript -->
                <script src="../static/js/creative.min.js"></script>
                <script>
                var _hmt = _hmt || [];
                (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0069ccbd994c77897aa8cde71d9269f4";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
                })();
                </script>
            </body>
        </html>